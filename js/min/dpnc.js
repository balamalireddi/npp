var template;var myfile;function loadTemplate(b){var a="templates/"+b+".html";a+="?_="+(new Date()).getTime();var c=$.get(a,function(d){template=d})}function changeExtension(a){var b=$("#dpnFilename").val().split(".")[0];$("#dpnFilename").val(b+"."+a)}function validateForm(){if(($("#instA").val()=="")||($("#instA").val()=="Insert the covered entity's name")){$("#label-InstaA").addClass("error");$("#msg-InstaA").css("display","visible");$("#instA").focus()}else{var j,i,h,f,e,d,b,a,c,g;j=$("#instA").val();i=preserveNewLine($("#instB").val());h=preserveNewLine($("#instC").val());f=preserveNewLine($("#instD").val());e=preserveNewLine($("#instE").val());d=$("#instF").val();b=preserveNewLine($("#instG").val());a=preserveNewLine($("#instH").val());c="Digital Privacy Notice for "+j;g=template;g=g.replace("InstructionA-Data",j);g=g.replace("InstructionB-Data",i);if(h!=""){g=g.replace('id="InstructionC-Div" style="display:none;"','id="InstructionC-Div" style="display:visible;"');g=g.replace("InstructionC-Data",h)}if(f!=""){g=g.replace('id="InstructionD-Div" style="display:none;"','id="InstructionD-Div" style="display:visible;"');g=g.replace("InstructionD-Data",f)}if(e!=""){g=g.replace('id="InstructionE-Div" style="display:none;"','id="InstructionE-Div" style="display:visible;"');g=g.replace("InstructionE-Data",e)}if(d!=""){g=g.replace('id="InstructionF-Div" style="display:none;"','id="InstructionF-Div" style="display:visible;"');g=g.replace("InstructionF-Data",d)}if(b!=""){g=g.replace('id="InstructionG-Div" style="display:none;"','id="InstructionG-Div" style="display:visible;"');g=g.replace("InstructionG-Data",b)}if(a!=""){g=g.replace('id="InstructionH-Div" style="display:none;"','id="InstructionH-Div" style="display:visible;"');g=g.replace("InstructionH-Data",a)}g=g.replace("docTitle",c);return g}}function preserveNewLine(b){var a;a=b.replace(/\n/g,"<br>");return a}$("#instA").keyup(function(){$("#label-InstaA").removeClass("error");$("#msg-InstaA").css("display","none");myfile=$("#instA").val();$("#dpnFilename").val(myfile);$("#mainMsgRow").css("display","none")});$("#resetButton").click(function(){$("#mainMsgRow").css("display","none");location.reload(true)});$("#dpnFilename").keyup(function(){myfile=$("#dpnFilename").val()});$("textarea").keyup(function(){validateFormInput(this)});$("input").keyup(function(){validateFormInput(this)});$("#guidemeDiv").click(function(){$(document).foundation("joyride","start")});$("#instF").fdatepicker({format:"mm-dd-yyyy"});function validateFormInput(c){var a;if($(c).is("input")){a=/[<>\\"'+;~!@{}[\]|$%^&*/.,()#:+=]/g}else{a=/[<>\\"+;~!{}[\]|$%^&*]/g}var b=$(c);b.val(b.val().replace(a,function(d){return""}))}function init(){Downloadify.create("downloadify",{filename:function(){return($("#dpnFilename").val()+".html")},data:function(){return validateForm()},onComplete:function(){$("#mainMsgDiv").removeClass("alert");$("#mainMsgDiv").html('<b>Your customized notice of privacy practice "'+myfile+'.html" has been saved on your local machine! <br> Please upload the html file to your website</b>');$("#mainMsgDiv").addClass("success");$("#mainMsgRow").css("display","visible");$(window).scrollTop($("#pageTop").offset().top)},onCancel:function(){$("#mainMsgDiv").html("<b>You have cancelled the saving of customized notice of privacy practice file.</b>");$("#mainMsgDiv").removeClass("success");$("#mainMsgDiv").addClass("alert");$("#mainMsgRow").css("display","visible");$(window).scrollTop($("#pageTop").offset().top)},onError:function(){alert("You must put something in the File Contents or there will be nothing to save!")},swf:"downloadify/media/downloadify.swf",downloadImage:"downloadify/images/createnotice.jpg",width:163,height:53,transparent:true,append:false})};